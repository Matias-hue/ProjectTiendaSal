document.addEventListener("DOMContentLoaded",function(){const s=document.getElementById("btn-agregar"),e=document.getElementById("dialog-agregar"),m=document.getElementById("btn-cerrar"),u=document.getElementById("dialog-editar"),E=document.getElementById("btn-cerrar-editar"),b=document.getElementById("dialog-eliminar"),g=document.getElementById("btn-cerrar-eliminar"),a=document.getElementById("btn-confirmar-eliminar");s&&e&&m&&(s.addEventListener("click",function(){e.showModal()}),m.addEventListener("click",function(){e.close()}));const n=e.querySelector("form"),i=n.querySelector('button[type="submit"]');n&&i&&n.addEventListener("submit",function(){i.disabled=!0,i.innerText="Creando..."}),console.log(e),console.log(n),document.querySelectorAll(".btn-editar-tabla").forEach(t=>{t.addEventListener("click",function(){const y=this.getAttribute("data-id"),o=this.getAttribute("data-nombre"),l=this.getAttribute("data-tamaño"),r=this.getAttribute("data-precio"),B=this.getAttribute("data-stock");document.getElementById("edit-nombre").value=o,document.getElementById("edit-tamaño").value=l,document.getElementById("edit-precio").value=r,document.getElementById("edit-stock").value=B,u.showModal();const I=document.getElementById("form-editar");I.action=`/productos/${y}`})}),E&&E.addEventListener("click",function(){u.close()});const d=document.getElementById("form-editar"),c=d.querySelector('button[type="submit"]');d&&c&&d.addEventListener("submit",function(){c.disabled=!0,c.innerText="Editando..."});const h=document.querySelectorAll(".btn-eliminar-tabla");let f;h.forEach(t=>{t.addEventListener("click",function(){var r;const o=this.closest("tr").querySelectorAll("td");console.log(o);const l=((r=o[1])==null?void 0:r.innerText)||"nombre no encontrado";document.getElementById("mensaje-eliminar").innerText=`¿Estás seguro de que deseas eliminar el producto "${l}"?`,b.showModal(),f=this.getAttribute("data-id")})}),a.addEventListener("click",function(){a.disabled=!0,a.innerText="Eliminando...",fetch(`/productos/${f}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content")}}).then(t=>{t.ok?location.reload():alert("Error al eliminar el producto.")}).catch(t=>{console.error("Error:",t),alert("Hubo un problema con la eliminación."+t.message)})}),g&&g.addEventListener("click",function(){b.close()})});
