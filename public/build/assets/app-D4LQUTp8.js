import{a as k}from"./index-DtQ_HIrt.js";window.axios=k;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";document.addEventListener("DOMContentLoaded",function(){const m=document.getElementById("btn-agregar"),o=document.getElementById("dialog-agregar"),u=document.getElementById("btn-cerrar");if(m&&o&&u){m.addEventListener("click",()=>o.showModal()),u.addEventListener("click",()=>o.close());const e=o.querySelector("form");if(e){const t=e.querySelector('button[type="submit"]');t&&e.addEventListener("submit",function(){t.disabled=!0,t.innerText="Creando..."})}}const c=document.getElementById("dialog-editar"),b=document.getElementById("btn-cerrar-editar"),r=document.getElementById("form-editar"),B=document.querySelectorAll(".btn-editar-tabla");if(c&&r){B.forEach(t=>{t.addEventListener("click",function(){var f,y,h,A;const n=this.getAttribute("data-id"),l=this.getAttribute("data-nombre"),a=this.getAttribute("data-tamaño"),d=this.getAttribute("data-precio"),v=this.getAttribute("data-stock");(f=document.getElementById("edit-nombre"))==null||f.setAttribute("value",l),(y=document.getElementById("edit-tamaño"))==null||y.setAttribute("value",a),(h=document.getElementById("edit-precio"))==null||h.setAttribute("value",d),(A=document.getElementById("edit-stock"))==null||A.setAttribute("value",v),c.showModal(),r.action=`/productos/${n}`})});const e=r.querySelector('button[type="submit"]');e&&r.addEventListener("submit",function(){e.disabled=!0,e.innerText="Editando..."}),b&&b.addEventListener("click",()=>c.close())}const s=document.getElementById("dialog-eliminar"),E=document.getElementById("btn-cerrar-eliminar"),i=document.getElementById("btn-confirmar-eliminar"),I=document.querySelectorAll(".btn-eliminar-tabla");let g;s&&i&&(I.forEach(e=>{e.addEventListener("click",function(){var d;const t=this.closest("tr"),n=t==null?void 0:t.querySelectorAll("td"),l=((d=n==null?void 0:n[1])==null?void 0:d.innerText)||"nombre no encontrado",a=document.getElementById("mensaje-eliminar");a&&(a.innerText=`¿Estás seguro de que deseas eliminar el producto "${l}"?`),s.showModal(),g=this.getAttribute("data-id")})}),i.addEventListener("click",function(){var t;i.disabled=!0,i.innerText="Eliminando...";const e=(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content");fetch(`/productos/${g}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":e||""}}).then(n=>{n.ok?location.reload():alert("Error al eliminar el producto.")}).catch(n=>{console.error("Error:",n),alert("Hubo un problema con la eliminación. "+n.message)})}),E&&E.addEventListener("click",()=>s.close()))});
