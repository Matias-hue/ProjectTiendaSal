document.addEventListener("DOMContentLoaded",function(){console.log("JavaScript de Usuarios cargado");const d=document.getElementById("search"),i=document.getElementById("usuarios-table-body"),a=document.querySelector(".pagination"),c="/usuarios",u=d==null?void 0:d.form;let m=null;d&&d.addEventListener("input",function(){clearTimeout(m),m=setTimeout(()=>{const t=d.value.trim();s(t)},300)}),u&&u.addEventListener("submit",function(t){t.preventDefault();const r=d.value.trim();s(r)}),a&&a.addEventListener("click",function(t){t.preventDefault();const r=t.target.closest(".page-link");if(r&&!r.parentElement.classList.contains("disabled")){const l=r.getAttribute("href");s(null,l)}});function s(t="",r=null){const l=r||`${c}?search=${encodeURIComponent(t)}`;fetch(l,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}).then(e=>{if(!e.ok)throw new Error(`Error HTTP: ${e.status}`);return e.json()}).then(e=>{if(i.innerHTML="",e.data.length===0){i.innerHTML='<tr><td colspan="6" style="text-align:center;">No se encontraron usuarios</td></tr>';return}e.data.forEach(n=>{const o=document.createElement("tr"),p=document.createElement("td");p.textContent=n.id,o.appendChild(p);const h=document.createElement("td");h.textContent=n.name||"No disponible",o.appendChild(h);const E=document.createElement("td");E.textContent=n.email||"No disponible",o.appendChild(E);const f=document.createElement("td");f.textContent=n.phone||"No disponible",o.appendChild(f);const C=document.createElement("td");C.textContent=n.address||"No disponible",o.appendChild(C);const g=document.createElement("td");g.textContent=n.role||"Usuario",o.appendChild(g);const b=document.createElement("td");b.innerHTML=`<a href="/usuarios/${n.id}/edit" class="btn-editar" aria-label="Editar usuario ${n.name||"No disponible"}">Editar</a>`,o.appendChild(b),i.appendChild(o)}),a.innerHTML=e.links||"";const L=t?`${c}?search=${encodeURIComponent(t)}`:c;window.history.pushState({},"",L)}).catch(e=>{console.error("Error fetching users:",e),i.innerHTML='<tr><td colspan="6" style="text-align:center;">Error al cargar usuarios</td></tr>'})}});
