document.addEventListener("DOMContentLoaded",function(){console.log("JavaScript de Inventario cargado");const s=document.getElementById("btn-agregar"),o=document.getElementById("dialog-agregar"),m=document.getElementById("btn-cerrar");if(s&&o&&m){s.addEventListener("click",()=>o.showModal()),m.addEventListener("click",()=>o.close());const e=o.querySelector("form"),t=e==null?void 0:e.querySelector('button[type="submit"]');e==null||e.addEventListener("submit",()=>{t&&(t.disabled=!0,t.innerText="Creando...")})}const r=document.getElementById("dialog-editar"),c=document.getElementById("btn-cerrar-editar"),d=document.getElementById("form-editar");if(r&&d){document.querySelectorAll(".btn-editar-tabla").forEach(t=>{t.addEventListener("click",()=>{const n=t.dataset.id;document.getElementById("edit-nombre").value=t.dataset.nombre,document.getElementById("edit-tamaño").value=t.dataset.tamaño,document.getElementById("edit-precio").value=t.dataset.precio,document.getElementById("edit-stock").value=t.dataset.stock,d.action=`/productos/${n}`,r.showModal()})});const e=d.querySelector('button[type="submit"]');d.addEventListener("submit",()=>{e&&(e.disabled=!0,e.innerText="Editando...")}),c==null||c.addEventListener("click",()=>r.close())}const i=document.getElementById("dialog-eliminar"),l=document.getElementById("btn-cerrar-eliminar"),a=document.getElementById("btn-confirmar-eliminar");let u;i&&a&&(document.querySelectorAll(".btn-eliminar-tabla").forEach(e=>{e.addEventListener("click",()=>{u=e.dataset.id;const t=e.dataset.nombre||"producto",n=document.getElementById("mensaje-eliminar");n&&(n.innerText=`¿Estás seguro de que deseas eliminar el producto "${t}"?`),i.showModal()})}),a.addEventListener("click",()=>{var t;a.disabled=!0,a.innerText="Eliminando...";const e=(t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content");fetch(`/productos/${u}`,{method:"DELETE",headers:{"X-CSRF-TOKEN":e||"",Accept:"application/json"}}).then(n=>{n.ok?location.reload():(console.error("Error al eliminar:",n),alert("Error al eliminar el producto."))}).catch(n=>{console.error("Error:",n),alert("Hubo un problema al eliminar el producto: "+n.message)})}),l==null||l.addEventListener("click",()=>i.close()))});
